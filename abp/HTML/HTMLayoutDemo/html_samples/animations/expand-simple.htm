<html>
<head>
  <style>
  
    div.playground
    {
      width:25%;
      height:*; 
      overflow:hidden;
      background-color: white;
    }
   
    div.playground > caption
    {
      background:orange;
      prototype: SlideNext;
    }
    
    div.playground > div.expandable
    {
      width:100%%;
      height:0%%; 
      display:none;
      border:1px solid black;
      overflow:hidden;
    }
    
    div.playground > div.expandable:animating,
    div.playground > div.expandable:expanded
    {
      height:100%%; 
      display:block;
      background-color:floralwhite floralwhite bisque bisque;
    }
  </style>  
  <script type="text/tiscript">  
  
  function expandIt(element, stepDelay = 8)
  {
    var expansion = 0; 
    function do_expand()
    {
      expansion += 2;
      if( expansion <= 100 ) { element.style#height = flex(expansion); return stepDelay; }
      else element.style#height = "100%%";
    }
    function do_collapse()
    {
      expansion -= 2;
      if( expansion >= 0 )   { element.style#height = flex(expansion); return stepDelay; }
      else element.style#height = 0;
    }
    if(element.expanded  ) {  expansion = 100;  element.expanded = false;  element.animate(do_collapse);  }
    else                   {  expansion = 0;    element.expanded = true;   element.animate(do_expand); }
  }
   
    
  type SlideNext: Behavior
  {
    function onMouse(evt)
    {
      if(evt.type == Event.MOUSE_DOWN || evt.type == Event.MOUSE_DCLICK)
      {
        var delay = self#delay.value || 8;
        expandIt(this.next, delay);        
        return true;
      }
      return false;
    }
  }
  </script>
<head>
<body style="flow:horizontal">
  <div .playground> 
    <caption>Caption 1</caption>
    <div .expandable>
      Panel content 1
      <p>test test test test test test test test test test test test test test test test test test test test test test test test test test test test</p>
    </div>
    <caption>Caption 2</caption>
    <div .expandable>
      Panel content 2
      <p>test test test test test test test test test test test test test test test test test test test test test test test test test test test test</p>
    </div>
    <caption>Caption 3</caption>
    <div .expandable>
      Panel content 3
      <p>test test test test test test test test test test test test test test test test test test test test test test test test test test test test</p>
    </div>
  </div>
  <div style="padding:20px">
    <h1>Example of simple expand/collapse animation</h1>
    <p>This sample rely on flex units computations. Delay between steps is <input #delay type=number size=3 step=1 minvalue=1 maxvalue=100 value=8 /> ms</p>
    <p>Clcik on one of captions to start animation.</p>
  </div>
</body>
</html>